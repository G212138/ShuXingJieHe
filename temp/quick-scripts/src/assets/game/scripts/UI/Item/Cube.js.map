{"version":3,"sources":["assets\\game\\scripts\\UI\\Item\\Cube.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { NetWork } from \"../../../../frame/scripts/Http/NetWork\";\nimport { ListenerManager } from \"../../../../frame/scripts/Manager/ListenerManager\";\nimport { SoundManager } from \"../../../../frame/scripts/Manager/SoundManager\";\nimport { SyncDataManager } from \"../../../../frame/scripts/Manager/SyncDataManager\";\nimport { EventType } from \"../../Data/EventType\";\nimport { SoundConfig } from \"./SoundConfig\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Cube extends cc.Component {\n    //上面的面\n    @property(cc.Node)\n    private upFace: cc.Node = null;\n    //下面的面\n    @property(cc.Node)\n    private downFace: cc.Node = null;\n    //左面的面\n    @property(cc.Node)\n    private leftFace: cc.Node = null;\n    //右面的面\n    @property(cc.Node)\n    private rightFace: cc.Node = null;\n    //前面的面\n    @property(cc.Node)\n    private frontFace: cc.Node = null;\n    //后面的面\n    @property(cc.Node)\n    private backFace: cc.Node = null;\n\n\n    //方块的行列层索引\n    private xIndex: number;\n    private yIndex: number;\n    private zIndex: number;\n\n    private isHide: boolean = false;\n\n    private initPos: cc.Vec3 = cc.v3();\n\n    public init(xCount: number, yCount: number, zCount: number) {\n        this.xIndex = xCount;\n        this.yIndex = yCount;\n        this.zIndex = zCount;\n        this.initPos = this.node.position;\n        this.onChangeColor();\n    }\n\n    private clickCube(clckName: string) {\n        let enableClick = false;\n        let data = { xIndex: null, yIndex: null, zIndex: null }\n        switch (clckName) {\n            case \"up\":\n                enableClick = this.yIndex == 5;\n                data.xIndex = this.xIndex;\n                data.zIndex = this.zIndex;\n                break;\n            case \"down\":\n                enableClick = this.yIndex == 0;\n                data.xIndex = this.xIndex;\n                data.zIndex = this.zIndex;\n                break;\n            case \"left\":\n                enableClick = this.xIndex == 0;\n                data.yIndex = this.yIndex;\n                data.zIndex = this.zIndex;\n                break;\n            case \"right\":\n                enableClick = this.xIndex == 5;\n                data.yIndex = this.yIndex;\n                data.zIndex = this.zIndex;\n                break;\n            case \"front\":\n                enableClick = this.zIndex == 5;\n                data.xIndex = this.xIndex;\n                data.yIndex = this.yIndex;\n                break;\n            case \"back\":\n                enableClick = this.zIndex == 0;\n                data.xIndex = this.xIndex;\n                data.yIndex = this.yIndex;\n                break;\n            default:\n                break;\n        }\n        SyncDataManager.getSyncData().customSyncData.cubeClickArr.push(data);\n        ListenerManager.dispatch(EventType.CLICK_CUBE, data);\n    }\n\n    public handleCubeClick(data: { xIndex: number, yIndex: number, zIndex: number }, isClick:boolean = true) {\n        if (data.xIndex == null && data.yIndex == this.yIndex && data.zIndex == this.zIndex) {\n            if (isClick) {\n                SoundManager.stopSoundByName(SoundConfig.soudlist[\"打孔音效\"]);\n                SoundManager.playEffect(SoundConfig.soudlist[\"打孔音效\"], false, false);\n            }            \n            this.isHide = true;\n            this.node.active = false;\n        } else if (data.yIndex == null && data.xIndex == this.xIndex && data.zIndex == this.zIndex) {\n            if (isClick) {\n                SoundManager.stopSoundByName(SoundConfig.soudlist[\"打孔音效\"]);\n                SoundManager.playEffect(SoundConfig.soudlist[\"打孔音效\"], false, false);\n            }\n            this.isHide = true;\n            this.node.active = false;\n        } else if (data.zIndex == null && data.xIndex == this.xIndex && data.yIndex == this.yIndex) {\n            if (isClick) {\n                SoundManager.stopSoundByName(SoundConfig.soudlist[\"打孔音效\"]);\n                SoundManager.playEffect(SoundConfig.soudlist[\"打孔音效\"], false, false);\n            }\n            this.isHide = true;\n            this.node.active = false;\n        }\n    }\n\n    public handleOpen(pos: { x: number, y: number, z: number }) {\n        this.node.setPosition(pos.x, pos.y, pos.z);\n    }\n\n    public handleClose() {\n        this.node.setPosition(this.initPos);\n    }\n\n    public reset() {\n        this.isHide = false;\n        this.node.active = true;\n    }\n\n    private onChangeColor() {\n        if (this.xIndex == 0) {\n            let material = this.leftFace.getComponent(cc.MeshRenderer).getMaterial(0);\n            let color = new cc.Color().fromHEX(\"#2DB97A\");\n            material.setProperty(\"diffuseColor\", color, 0)\n        }\n        if (this.xIndex == SyncDataManager.getSyncData().customSyncData.xCount - 1) {\n            let material = this.rightFace.getComponent(cc.MeshRenderer).getMaterial(0);\n            let color = new cc.Color().fromHEX(\"#2DB97A\");\n            material.setProperty(\"diffuseColor\", color, 0)\n        }\n        if (this.yIndex == 0) {\n            let material = this.downFace.getComponent(cc.MeshRenderer).getMaterial(0);\n            let color = new cc.Color().fromHEX(\"#2DB97A\");\n            material.setProperty(\"diffuseColor\", color, 0)\n        }\n        if (this.yIndex == SyncDataManager.getSyncData().customSyncData.yCount - 1) {\n            let material = this.upFace.getComponent(cc.MeshRenderer).getMaterial(0);\n            let color = new cc.Color().fromHEX(\"#2DB97A\");\n            material.setProperty(\"diffuseColor\", color, 0)\n        }\n        if (this.zIndex == 0) {\n            let material = this.backFace.getComponent(cc.MeshRenderer).getMaterial(0);\n            let color = new cc.Color().fromHEX(\"#2DB97A\");\n            material.setProperty(\"diffuseColor\", color, 0)\n        }\n        if (this.zIndex == SyncDataManager.getSyncData().customSyncData.zCount - 1) {\n            let material = this.frontFace.getComponent(cc.MeshRenderer).getMaterial(0);\n            let color = new cc.Color().fromHEX(\"#2DB97A\");\n            material.setProperty(\"diffuseColor\", color, 0)\n        }\n    }\n\n\n}\n"]}